{
  "info": {
    "title": "TestEntityNewHarmonize",
    "version": "1.0.0",
    "description": "Mapping information for the harmonize model."
  },
  "pathNamespaces": [
    {
      "prefix": "es",
      "namespaceUri": "http://marklogic.com/entity-services"
    },
    {
      "prefix": "xyz",
      "namespaceUri": "http://nl.abnamro.com/cre/xyz",
      "default": true
    },
    {
      "prefix": "fn",
      "namespaceUri": "http://www.w3.org/2005/xpath-functions"
    },
    {
      "prefix": "fcm",
      "namespaceUri": "http://abnamro.nl/data-hub/common"
    }
  ],
  "collector": {
    "testEntityNew": {
      "$ref": "#/contexts/TESTDATA"
    }
  },
  "contexts": {
    "TESTDATA": {
      "path": "/TESTDATA",
      "collections": [
        {
          "collectionsAnd": [
            "latest",
            "http://nl.abnamro.com/cre/raw",
            "http://nl.abnamro.com/cre/source/xyz",
            "http://nl.abnamro.com/cre/entity/testentitynew"
          ]
        }
      ]
    }
  },
  "definitions": {
    "TestEntityNew": {
      "headers": {
        "hid": {
          "expression": "fcm:md5(fn:string-join((EmployeeID,employeeName), '-'))"
        }
      },
      "properties": {
        "clientID": {
          "enabled": true,
          "expression": "fn:string-join(('ABN',EmployeeID), ':')"
        },
        "EmployeeFirstName": {
          "enabled": true,
          "expression": "employeeName"
        },
        "supervisername": {
          "enabled": true,
          "expression": "ManagerName"
        },
        "DOB": {
          "enabled": true,
          "expression": "fn:tokenize(xdmp:parse-yymmdd('MM/dd/yyyy', xs:string(DOB)),'T')[1]"
        },
        "Account": {
          "enabled": true,
          "coalesce": [
            {
              "expression": "xs:string('ABN AMRO')",
              "condition": "upper-case(xs:string(Account)) = 'ABN'"
            },
            {
              "expression": "xs:string('Citi Bank')",
              "condition": "upper-case(xs:string(Account)) = 'CITI'"
            }
          ]
        }
      }
    }
  }
}